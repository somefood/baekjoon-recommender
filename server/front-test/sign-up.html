<html>
    <head th:fragment="headFragment">
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    
        <!-- Bootstrap CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet"
              integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
    
        <title>Front api test</title>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Do+Hyeon&display=swap" rel="stylesheet">
    
        <style>
            * {
                font-family: 'Do Hyeon', sans-serif;
            }
    
            a {
                color: black;
                text-decoration: none;
            }
    
        </style>

        <script>
            $(function() {
	            $("#join--submit").on("click", function() {
                    const userRequestDTO = {
                        username: "kjj",
                        baekJoonId: "rlawowns000",
                        password: "123"
                    };

                    const settingRequestDTO = {
                        option : "TODAY",
                        levels : "1,2,3,4,5",
                        tags : "Math,DFS,BFS",
                        sun : "Math,DFS,BFS",
                        mon : "",
                        tue : "",
                        wed : "Math,DFS,BFS",
                        thu : "Math,DFS,BFS",
                        fri : "Math,DFS,BFS",
                        sat : ""
                    };

                    const signUpRequestDTO = {
                        userRequestDTO : userRequestDTO,
                        settingRequestDTO : settingRequestDTO
                    };

                    // let data = {
                    //     name: $('#name').val(),
                    //     account: $('#account').val(),
                    //     password: $('#password').val(),
                    //     age: $('#age').val(),
                    //     roles: $('#roles').val(),
                    // }

                    $.ajax({
                        type: 'POST',
                        url: 'http://localhost:8080/api/v1/user',
                        data: JSON.stringify(signUpRequestDTO),
                        contentType: 'application/json; charset=utf-8',
                        dataType: 'json'
                    }).done(function(r) {
                        alert("Sign up success");
                        window.location.href = "/"; // home으로 이동하게 함
                    }).fail(function(r) {
                        alert(signUpRequestDTO.settingRequestDTO.levels);
                        alert('서버 오류');
                    });
                });
            });
        </script>
    </head>
    <!-- 회원 가입 양식 -->
    <div class="container d-flex justify-content-center">
        <div class="">
            <form class="justify-content-center mb-0">
                <input type="text">hello
            </form>

            <div class="d-flex justify-content-end align-items-center me-5">
                <button id="join--submit" class="mt-0 btn btn-secondary">SIGN UP</button>
            </div>
        </div>

    </div>
</html>